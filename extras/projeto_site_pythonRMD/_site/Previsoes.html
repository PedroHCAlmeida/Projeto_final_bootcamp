<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Previsoes.knit</title>

<script src="site_libs/header-attrs-2.9/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Pedro Henrique Corrêa de Almeida</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Previsão de Internação por COVID-19
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Analise_exploratoria.html">Análise exploratória</a>
    </li>
    <li>
      <a href="Previsoes.html">Previsões</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/PedroHCAlmeida">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://www.linkedin.com/in/pedro-henrique-corr%C3%AAa-de-almeida-15398b105/">
    <span class="fa fa-linkedin"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">




</div>


<div id="previsão-da-necessidade-de-cuidados-intensivos" class="section level1">
<h1>Previsão da necessidade de cuidados intensivos</h1>
<pre class="python"><code>import sys

print(sys.executable)</code></pre>
<pre><code>## C:\PROGRA~1\R\R-40~1.5\bin\x64\Rterm.exe</code></pre>
</div>
<div id="resumo" class="section level1">
<h1>Resumo</h1>
</div>
<div id="contexto-do-problema" class="section level1">
<h1>Contexto do problema</h1>
</div>
<div id="escopo" class="section level1">
<h1>Escopo</h1>
</div>
<div id="importação-dos-pacotes" class="section level1">
<h1>Importação dos pacotes</h1>
<pre class="python"><code>import pandas as pd
from scipy.stats import normaltest
import matplotlib.pyplot as plt
import seaborn as sns
import time

from sklearn.feature_selection import SelectFromModel
from sklearn.model_selection import RepeatedStratifiedKFold, RandomizedSearchCV
from sklearn.pipeline import Pipeline
from pipelinehelper import PipelineHelper
from sklearn.utils import resample

from sklearn.linear_model import LogisticRegression
from sklearn.tree import DecisionTreeClassifier
from sklearn.ensemble import RandomForestClassifier,ExtraTreesClassifier
from lightgbm import LGBMClassifier
from xgboost import XGBClassifier

import warnings
import os</code></pre>
<pre class="python"><code>warnings.filterwarnings(&#39;ignore&#39;)
SEED = 64541</code></pre>
</div>
<div id="importações-das-funções-locais" class="section level1">
<h1>Importações das funções locais</h1>
<pre class="python"><code>os.chdir(&quot;../../funcoes&quot;)
from my_classifier import Classifier
os.chdir(&quot;../extras/projeto_site_pythonRMD&quot;)</code></pre>
</div>
<div id="leitura-dos-dados-pré-processados" class="section level1">
<h1>Leitura dos dados pré-processados</h1>
<pre class="python"><code>df = pd.read_csv(&#39;../../dados/dados_preprocessados/preprocessados.csv&#39;)</code></pre>
<pre class="python"><code>sns.set_style(&#39;darkgrid&#39;)</code></pre>
<pre class="python"><code>df.head()</code></pre>
<pre><code>##    AGE_ABOVE65  DISEASE GROUPING 1  ...  AGE_ABOVE_50th  AGE_ABOVE_80th
## 0            1                   0  ...               1               0
## 1            0                   0  ...               0               0
## 2            0                   0  ...               0               0
## 3            0                   0  ...               0               0
## 4            0                   0  ...               0               0
## 
## [5 rows x 61 columns]</code></pre>
</div>
<div id="validação-cruzada" class="section level1">
<h1>Validação Cruzada</h1>
<p>A validação cruzada é um método estatístico usado para estimar a habilidade dos modelos de aprendizado de máquina, portanto a fim de tentar resumir a performance de um modelo de Machine Learning e, escolher o melhor modelo para o problema em questão. Essa técnica consiste em realizar divisões dentro do dataset inteiro entre dados de treino e teste de forma const</p>
<div class="figure">
<img src="../img/dataml_cross_validation.png" alt="" />
<p class="caption">CV</p>
</div>
<div id="repeatedstratifiedkfold" class="section level3">
<h3>RepeatedStratifiedKFold</h3>
<p>porém realizando divisões no dataset de forma que as proporções da variável dependente se mantivessem as mais próximas possíveis em toda a divisão, e além disso realizando essa validação cruzada diversas vezes para que, com isso, consiga resumir a performance de um modelo da maneira mais realista possível.</p>
</div>
</div>
<div id="métricas" class="section level1">
<h1>Métricas</h1>
</div>
<div id="primeiros-modelos" class="section level1">
<h1>Primeiros modelos</h1>
<pre class="python"><code>lr = Classifier(LogisticRegression, df, max_iter=1000)
lr.cross_val()</code></pre>
<pre><code>##   0%|          | 0/50 [00:00&lt;?, ?it/s]
## 10 repetições de Validação Cruzada com 5 divisões no dataset
## ----------------------------------------------------------------------------------
## CLASSIFICADOR                           : LogisticRegression(max_iter=1000, random_state=64541)
## ----------------------------------------------------------------------------------
## Métricas no dataset de teste:           
## Intervalo de 95% da média            |   Média por classe
## -------------------------------------|--------------------------------------------
## ROC AUC MÉDIA      : 0.746 ± 0.016   |  
## ACCURACY  MÉDIA    : 0.697 ± 0.018   |
## -------------------------------------|--------------------------------------------
##                       MÉDIA MACRO    |CLASSE 0  |CLASSE 1
## ----------------------------------------------------------------------------------
## PRECISÃO  MÉDIA    : 0.674 ± 0.023   |0.729     |0.605    
## RECALL MÉDIO       : 0.639 ± 0.019   |0.842     |0.436     
## F1-SCORE  MÉDIO    : 0.642 ± 0.020   |0.781     |0.507    
## 
## TEMPO MÉDIO DE TREINAMENTO:0.064</code></pre>
<pre class="python"><code>dt = Classifier(DecisionTreeClassifier, df)
dt.cross_val()</code></pre>
<pre><code>##   0%|          | 0/50 [00:00&lt;?, ?it/s]
## 10 repetições de Validação Cruzada com 5 divisões no dataset
## ----------------------------------------------------------------------------------
## CLASSIFICADOR                           : DecisionTreeClassifier(random_state=64541)
## ----------------------------------------------------------------------------------
## Métricas no dataset de teste:           
## Intervalo de 95% da média            |   Média por classe
## -------------------------------------|--------------------------------------------
## ROC AUC MÉDIA      : 0.609 ± 0.017   |  
## ACCURACY  MÉDIA    : 0.641 ± 0.016   |
## -------------------------------------|--------------------------------------------
##                       MÉDIA MACRO    |CLASSE 0  |CLASSE 1
## ----------------------------------------------------------------------------------
## PRECISÃO  MÉDIA    : 0.612 ± 0.017   |0.720     |0.498    
## RECALL MÉDIO       : 0.609 ± 0.017   |0.723     |0.494     
## F1-SCORE  MÉDIO    : 0.608 ± 0.017   |0.721     |0.496    
## 
## TEMPO MÉDIO DE TREINAMENTO:0.006</code></pre>
<pre class="python"><code>rf = Classifier(RandomForestClassifier, df)
rf.cross_val()</code></pre>
<pre><code>##   0%|          | 0/50 [00:00&lt;?, ?it/s]
## 10 repetições de Validação Cruzada com 5 divisões no dataset
## ----------------------------------------------------------------------------------
## CLASSIFICADOR                           : RandomForestClassifier(random_state=64541)
## ----------------------------------------------------------------------------------
## Métricas no dataset de teste:           
## Intervalo de 95% da média            |   Média por classe
## -------------------------------------|--------------------------------------------
## ROC AUC MÉDIA      : 0.763 ± 0.015   |  
## ACCURACY  MÉDIA    : 0.705 ± 0.014   |
## -------------------------------------|--------------------------------------------
##                       MÉDIA MACRO    |CLASSE 0  |CLASSE 1
## ----------------------------------------------------------------------------------
## PRECISÃO  MÉDIA    : 0.684 ± 0.019   |0.734     |0.622    
## RECALL MÉDIO       : 0.648 ± 0.015   |0.849     |0.447     
## F1-SCORE  MÉDIO    : 0.652 ± 0.017   |0.788     |0.520    
## 
## TEMPO MÉDIO DE TREINAMENTO:0.192</code></pre>
<pre class="python"><code>et = Classifier(ExtraTreesClassifier, df)
et.cross_val()</code></pre>
<pre><code>##   0%|          | 0/50 [00:00&lt;?, ?it/s]
## 10 repetições de Validação Cruzada com 5 divisões no dataset
## ----------------------------------------------------------------------------------
## CLASSIFICADOR                           : ExtraTreesClassifier(random_state=64541)
## ----------------------------------------------------------------------------------
## Métricas no dataset de teste:           
## Intervalo de 95% da média            |   Média por classe
## -------------------------------------|--------------------------------------------
## ROC AUC MÉDIA      : 0.724 ± 0.019   |  
## ACCURACY  MÉDIA    : 0.667 ± 0.016   |
## -------------------------------------|--------------------------------------------
##                       MÉDIA MACRO    |CLASSE 0  |CLASSE 1
## ----------------------------------------------------------------------------------
## PRECISÃO  MÉDIA    : 0.634 ± 0.023   |0.703     |0.551    
## RECALL MÉDIO       : 0.600 ± 0.017   |0.834     |0.366     
## F1-SCORE  MÉDIO    : 0.600 ± 0.019   |0.763     |0.440    
## 
## TEMPO MÉDIO DE TREINAMENTO:0.134</code></pre>
<pre class="python"><code>xg = Classifier(XGBClassifier, df, verbosity=0)
xg.cross_val()</code></pre>
<pre><code>##   0%|          | 0/50 [00:00&lt;?, ?it/s]
## 10 repetições de Validação Cruzada com 5 divisões no dataset
## ----------------------------------------------------------------------------------
## CLASSIFICADOR                           : XGBClassifier(base_score=0.5, booster=&#39;gbtree&#39;, colsample_bylevel=1,
##               colsample_bynode=1, colsample_bytree=1, gamma=0, gpu_id=-1,
##               importance_type=&#39;gain&#39;, interaction_constraints=&#39;&#39;,
##               learning_rate=0.300000012, max_delta_step=0, max_depth=6,
##               min_child_weight=1, missing=nan, monotone_constraints=&#39;()&#39;,
##               n_estimators=100, n_jobs=4, num_parallel_tree=1,
##               random_state=64541, reg_alpha=0, reg_lambda=1, scale_pos_weight=1,
##               subsample=1, tree_method=&#39;exact&#39;, validate_parameters=1,
##               verbosity=0)
## ----------------------------------------------------------------------------------
## Métricas no dataset de teste:           
## Intervalo de 95% da média            |   Média por classe
## -------------------------------------|--------------------------------------------
## ROC AUC MÉDIA      : 0.751 ± 0.014   |  
## ACCURACY  MÉDIA    : 0.712 ± 0.013   |
## -------------------------------------|--------------------------------------------
##                       MÉDIA MACRO    |CLASSE 0  |CLASSE 1
## ----------------------------------------------------------------------------------
## PRECISÃO  MÉDIA    : 0.691 ± 0.017   |0.755     |0.614    
## RECALL MÉDIO       : 0.670 ± 0.014   |0.817     |0.524     
## F1-SCORE  MÉDIO    : 0.674 ± 0.014   |0.785     |0.565    
## 
## TEMPO MÉDIO DE TREINAMENTO:0.076</code></pre>
<pre class="python"><code>lgbm = Classifier(LGBMClassifier, df, verbosity=-1)
lgbm.cross_val()</code></pre>
<pre><code>##   0%|          | 0/50 [00:00&lt;?, ?it/s]
## 10 repetições de Validação Cruzada com 5 divisões no dataset
## ----------------------------------------------------------------------------------
## CLASSIFICADOR                           : LGBMClassifier(random_state=64541, verbosity=-1)
## ----------------------------------------------------------------------------------
## Métricas no dataset de teste:           
## Intervalo de 95% da média            |   Média por classe
## -------------------------------------|--------------------------------------------
## ROC AUC MÉDIA      : 0.758 ± 0.013   |  
## ACCURACY  MÉDIA    : 0.716 ± 0.013   |
## -------------------------------------|--------------------------------------------
##                       MÉDIA MACRO    |CLASSE 0  |CLASSE 1
## ----------------------------------------------------------------------------------
## PRECISÃO  MÉDIA    : 0.693 ± 0.016   |0.755     |0.623    
## RECALL MÉDIO       : 0.672 ± 0.015   |0.825     |0.519     
## F1-SCORE  MÉDIO    : 0.676 ± 0.015   |0.789     |0.566    
## 
## TEMPO MÉDIO DE TREINAMENTO:0.029</code></pre>
<pre class="python"><code>ax = lr.plot_roc_curve()
dt.plot_roc_curve(ax=ax)</code></pre>
<pre><code>## &lt;AxesSubplot:title={&#39;left&#39;:&#39;CURVA ROC\n&#39;}, xlabel=&#39;Taxa de Falsos Positivos&#39;, ylabel=&#39;Taxa de Verdadeiros Positivos&#39;&gt;</code></pre>
<pre class="python"><code>rf.plot_roc_curve(ax=ax)</code></pre>
<pre><code>## &lt;AxesSubplot:title={&#39;left&#39;:&#39;CURVA ROC\n&#39;}, xlabel=&#39;Taxa de Falsos Positivos&#39;, ylabel=&#39;Taxa de Verdadeiros Positivos&#39;&gt;</code></pre>
<pre class="python"><code>xg.plot_roc_curve(ax=ax, name_estimator=&#39;XGBoost()&#39;)</code></pre>
<pre><code>## &lt;AxesSubplot:title={&#39;left&#39;:&#39;CURVA ROC\n&#39;}, xlabel=&#39;Taxa de Falsos Positivos&#39;, ylabel=&#39;Taxa de Verdadeiros Positivos&#39;&gt;</code></pre>
<pre class="python"><code>lgbm.plot_roc_curve(ax=ax)</code></pre>
<pre><code>## &lt;AxesSubplot:title={&#39;left&#39;:&#39;CURVA ROC\n&#39;}, xlabel=&#39;Taxa de Falsos Positivos&#39;, ylabel=&#39;Taxa de Verdadeiros Positivos&#39;&gt;</code></pre>
<pre class="python"><code>et.plot_roc_curve(ax=ax)</code></pre>
<pre><code>## &lt;AxesSubplot:title={&#39;left&#39;:&#39;CURVA ROC\n&#39;}, xlabel=&#39;Taxa de Falsos Positivos&#39;, ylabel=&#39;Taxa de Verdadeiros Positivos&#39;&gt;</code></pre>
<pre class="python"><code>plt.show()</code></pre>
<p><img src="Analise_exploratoria_files/figure-html/unnamed-chunk-1-1.png" width="1920" /></p>
</div>
<div id="reamostragem" class="section level1">
<h1>Reamostragem</h1>
<pre class="python"><code>df[&#39;ICU&#39;].value_counts()</code></pre>
<pre><code>## 0    189
## 1    105
## Name: ICU, dtype: int64</code></pre>
<pre class="python"><code>icu0 = df.query(&#39;ICU == 0&#39;)
icu1 = df.query(&#39;ICU == 1&#39;)</code></pre>
<pre class="python"><code>icu1_resample = resample(icu1,
                         n_samples=len(icu0),
                         random_state=SEED)</code></pre>
<pre class="python"><code>df_resample = pd.concat([icu1_resample, icu0], axis=0)
df_resample[&#39;ICU&#39;].value_counts()</code></pre>
<pre><code>## 1    189
## 0    189
## Name: ICU, dtype: int64</code></pre>
<pre class="python"><code>lr = Classifier(LogisticRegression, df_resample, max_iter=1000)
lr.cross_val()</code></pre>
<pre><code>##   0%|          | 0/50 [00:00&lt;?, ?it/s]
## 10 repetições de Validação Cruzada com 5 divisões no dataset
## ----------------------------------------------------------------------------------
## CLASSIFICADOR                           : LogisticRegression(max_iter=1000, random_state=64541)
## ----------------------------------------------------------------------------------
## Métricas no dataset de teste:           
## Intervalo de 95% da média            |   Média por classe
## -------------------------------------|--------------------------------------------
## ROC AUC MÉDIA      : 0.780 ± 0.013   |  
## ACCURACY  MÉDIA    : 0.726 ± 0.014   |
## -------------------------------------|--------------------------------------------
##                       MÉDIA MACRO    |CLASSE 0  |CLASSE 1
## ----------------------------------------------------------------------------------
## PRECISÃO  MÉDIA    : 0.729 ± 0.014   |0.720     |0.733    
## RECALL MÉDIO       : 0.726 ± 0.014   |0.741     |0.712     
## F1-SCORE  MÉDIO    : 0.725 ± 0.014   |0.730     |0.722    
## 
## TEMPO MÉDIO DE TREINAMENTO:0.062</code></pre>
<pre class="python"><code>dt = Classifier(DecisionTreeClassifier, df_resample)
dt.cross_val()</code></pre>
<pre><code>##   0%|          | 0/50 [00:00&lt;?, ?it/s]
## 10 repetições de Validação Cruzada com 5 divisões no dataset
## ----------------------------------------------------------------------------------
## CLASSIFICADOR                           : DecisionTreeClassifier(random_state=64541)
## ----------------------------------------------------------------------------------
## Métricas no dataset de teste:           
## Intervalo de 95% da média            |   Média por classe
## -------------------------------------|--------------------------------------------
## ROC AUC MÉDIA      : 0.793 ± 0.010   |  
## ACCURACY  MÉDIA    : 0.793 ± 0.010   |
## -------------------------------------|--------------------------------------------
##                       MÉDIA MACRO    |CLASSE 0  |CLASSE 1
## ----------------------------------------------------------------------------------
## PRECISÃO  MÉDIA    : 0.804 ± 0.010   |0.853     |0.750    
## RECALL MÉDIO       : 0.793 ± 0.010   |0.707     |0.878     
## F1-SCORE  MÉDIO    : 0.791 ± 0.011   |0.774     |0.809    
## 
## TEMPO MÉDIO DE TREINAMENTO:0.007</code></pre>
<pre class="python"><code>rf = Classifier(RandomForestClassifier, df_resample)
rf.cross_val()</code></pre>
<pre><code>##   0%|          | 0/50 [00:00&lt;?, ?it/s]
## 10 repetições de Validação Cruzada com 5 divisões no dataset
## ----------------------------------------------------------------------------------
## CLASSIFICADOR                           : RandomForestClassifier(random_state=64541)
## ----------------------------------------------------------------------------------
## Métricas no dataset de teste:           
## Intervalo de 95% da média            |   Média por classe
## -------------------------------------|--------------------------------------------
## ROC AUC MÉDIA      : 0.945 ± 0.007   |  
## ACCURACY  MÉDIA    : 0.863 ± 0.011   |
## -------------------------------------|--------------------------------------------
##                       MÉDIA MACRO    |CLASSE 0  |CLASSE 1
## ----------------------------------------------------------------------------------
## PRECISÃO  MÉDIA    : 0.866 ± 0.011   |0.885     |0.843    
## RECALL MÉDIO       : 0.863 ± 0.011   |0.834     |0.892     
## F1-SCORE  MÉDIO    : 0.863 ± 0.011   |0.859     |0.867    
## 
## TEMPO MÉDIO DE TREINAMENTO:0.187</code></pre>
<pre class="python"><code>et = Classifier(ExtraTreesClassifier, df_resample)
et.cross_val()</code></pre>
<pre><code>##   0%|          | 0/50 [00:00&lt;?, ?it/s]
## 10 repetições de Validação Cruzada com 5 divisões no dataset
## ----------------------------------------------------------------------------------
## CLASSIFICADOR                           : ExtraTreesClassifier(random_state=64541)
## ----------------------------------------------------------------------------------
## Métricas no dataset de teste:           
## Intervalo de 95% da média            |   Média por classe
## -------------------------------------|--------------------------------------------
## ROC AUC MÉDIA      : 0.942 ± 0.007   |  
## ACCURACY  MÉDIA    : 0.869 ± 0.011   |
## -------------------------------------|--------------------------------------------
##                       MÉDIA MACRO    |CLASSE 0  |CLASSE 1
## ----------------------------------------------------------------------------------
## PRECISÃO  MÉDIA    : 0.872 ± 0.011   |0.858     |0.882    
## RECALL MÉDIO       : 0.869 ± 0.011   |0.886     |0.853     
## F1-SCORE  MÉDIO    : 0.869 ± 0.011   |0.871     |0.867    
## 
## TEMPO MÉDIO DE TREINAMENTO:0.135</code></pre>
<pre class="python"><code>xg = Classifier(XGBClassifier, df_resample, verbosity=0)
xg.cross_val()</code></pre>
<pre><code>##   0%|          | 0/50 [00:00&lt;?, ?it/s]
## 10 repetições de Validação Cruzada com 5 divisões no dataset
## ----------------------------------------------------------------------------------
## CLASSIFICADOR                           : XGBClassifier(base_score=0.5, booster=&#39;gbtree&#39;, colsample_bylevel=1,
##               colsample_bynode=1, colsample_bytree=1, gamma=0, gpu_id=-1,
##               importance_type=&#39;gain&#39;, interaction_constraints=&#39;&#39;,
##               learning_rate=0.300000012, max_delta_step=0, max_depth=6,
##               min_child_weight=1, missing=nan, monotone_constraints=&#39;()&#39;,
##               n_estimators=100, n_jobs=4, num_parallel_tree=1,
##               random_state=64541, reg_alpha=0, reg_lambda=1, scale_pos_weight=1,
##               subsample=1, tree_method=&#39;exact&#39;, validate_parameters=1,
##               verbosity=0)
## ----------------------------------------------------------------------------------
## Métricas no dataset de teste:           
## Intervalo de 95% da média            |   Média por classe
## -------------------------------------|--------------------------------------------
## ROC AUC MÉDIA      : 0.927 ± 0.009   |  
## ACCURACY  MÉDIA    : 0.847 ± 0.011   |
## -------------------------------------|--------------------------------------------
##                       MÉDIA MACRO    |CLASSE 0  |CLASSE 1
## ----------------------------------------------------------------------------------
## PRECISÃO  MÉDIA    : 0.852 ± 0.011   |0.879     |0.821    
## RECALL MÉDIO       : 0.847 ± 0.011   |0.806     |0.889     
## F1-SCORE  MÉDIO    : 0.847 ± 0.011   |0.841     |0.853    
## 
## TEMPO MÉDIO DE TREINAMENTO:0.081</code></pre>
<pre class="python"><code>lgbm = Classifier(LGBMClassifier, df_resample, verbosity=-1)
lgbm.cross_val()</code></pre>
<pre><code>##   0%|          | 0/50 [00:00&lt;?, ?it/s]
## 10 repetições de Validação Cruzada com 5 divisões no dataset
## ----------------------------------------------------------------------------------
## CLASSIFICADOR                           : LGBMClassifier(random_state=64541, verbosity=-1)
## ----------------------------------------------------------------------------------
## Métricas no dataset de teste:           
## Intervalo de 95% da média            |   Média por classe
## -------------------------------------|--------------------------------------------
## ROC AUC MÉDIA      : 0.939 ± 0.008   |  
## ACCURACY  MÉDIA    : 0.860 ± 0.010   |
## -------------------------------------|--------------------------------------------
##                       MÉDIA MACRO    |CLASSE 0  |CLASSE 1
## ----------------------------------------------------------------------------------
## PRECISÃO  MÉDIA    : 0.864 ± 0.010   |0.889     |0.835    
## RECALL MÉDIO       : 0.860 ± 0.010   |0.823     |0.897     
## F1-SCORE  MÉDIO    : 0.860 ± 0.010   |0.855     |0.865    
## 
## TEMPO MÉDIO DE TREINAMENTO:0.033</code></pre>
<pre class="python"><code>ax = lr.plot_roc_curve()
dt.plot_roc_curve(ax=ax)</code></pre>
<pre><code>## &lt;AxesSubplot:title={&#39;left&#39;:&#39;CURVA ROC\n&#39;}, xlabel=&#39;Taxa de Falsos Positivos&#39;, ylabel=&#39;Taxa de Verdadeiros Positivos&#39;&gt;</code></pre>
<pre class="python"><code>rf.plot_roc_curve(ax=ax)</code></pre>
<pre><code>## &lt;AxesSubplot:title={&#39;left&#39;:&#39;CURVA ROC\n&#39;}, xlabel=&#39;Taxa de Falsos Positivos&#39;, ylabel=&#39;Taxa de Verdadeiros Positivos&#39;&gt;</code></pre>
<pre class="python"><code>xg.plot_roc_curve(ax=ax, name_estimator=&#39;XGBoost()&#39;)</code></pre>
<pre><code>## &lt;AxesSubplot:title={&#39;left&#39;:&#39;CURVA ROC\n&#39;}, xlabel=&#39;Taxa de Falsos Positivos&#39;, ylabel=&#39;Taxa de Verdadeiros Positivos&#39;&gt;</code></pre>
<pre class="python"><code>lgbm.plot_roc_curve(ax=ax)</code></pre>
<pre><code>## &lt;AxesSubplot:title={&#39;left&#39;:&#39;CURVA ROC\n&#39;}, xlabel=&#39;Taxa de Falsos Positivos&#39;, ylabel=&#39;Taxa de Verdadeiros Positivos&#39;&gt;</code></pre>
<pre class="python"><code>et.plot_roc_curve(ax=ax)</code></pre>
<pre><code>## &lt;AxesSubplot:title={&#39;left&#39;:&#39;CURVA ROC\n&#39;}, xlabel=&#39;Taxa de Falsos Positivos&#39;, ylabel=&#39;Taxa de Verdadeiros Positivos&#39;&gt;</code></pre>
<pre class="python"><code>plt.show()</code></pre>
<p><img src="Analise_exploratoria_files/figure-html/unnamed-chunk-1-3.png" width="1920" /></p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
